!function(){"use strict";var t={4:function(t,e,a){a.g.Core=a(709),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((function(t){return new bootstrap.Tooltip(t)})),$('form[type="POST"]').on("keypress",(function(t){"Enter"===t.key&&t.preventDefault()})),$(".js-next-link").each((function(){this.hasAttribute("href")?this.setAttribute("href",Core.nextUrl(this.getAttribute("href"))):this.hasAttribute("data-href")&&(this.dataset.href=Core.nextUrl(this.dataset.href))})),$(".nav-link").each((function(){let t=this.getAttribute("href"),e="/"===t?"/"===location.pathname:0===location.pathname.indexOf(t);this.classList.toggle("active",e)})),$(".row-link").each((function(){let t=this.dataset.href||this.querySelector("a:first-child")?.getAttribute("href");t&&$(this).css("cursor","pointer").on("click",(function(e){"A"===e.target.tagName||e.target.closest("a,.row-link-disabled")||window.getSelection().isCollapsed&&(window.location=t)}))})),$(".js-list-select").each((function(){Core.restish.setListSelect($(this))})),$(".js-list-deselect").each((function(){Core.restish.setListDeselect($(this))})),$(".js-list-delete").each((function(){Core.restish.setListDelete($(this))})),$(".js-rest-create").each((function(){Core.restish.setCreate($(this))})),$(".js-rest-update").each((function(){Core.restish.setUpdate($(this))})),$(".js-rest-delete").each((function(){Core.restish.setDelete($(this))})),$(".js-form-submit").each((function(){Core.restish.setAjaxSubmit($(this))})),$(".js-clipboard-copy").each((function(){Core.clipboard.setCopy($(this))}))},955:function(t){t.exports=class t{static setCopy(e){let a=e.find(".bi");e.on("click",(function(s){t.copy(e.next()),a.toggleClass("bi-clipboard bi-check2"),setTimeout((()=>a.toggleClass("bi-clipboard bi-check2")),1e3),s.preventDefault()}))}static copy(e){"https:"===location.protocol?navigator.clipboard.writeText(e.text()):t.deprecatedCopy(e)}static deprecatedCopy(t){let e=document.getSelection(),a=new Range;a.selectNodeContents(t[0]),e.removeAllRanges(),e.addRange(a),document.execCommand("copy"),e.removeAllRanges()}}},709:function(t,e,a){t.exports=class{static clipboard=a(955);static loading=a(195);static modal=a(464);static restish=a(581);static nextUrl(t=""){let[e,a]=t.split("?");""===e&&(e=location.pathname);let s=new URLSearchParams((a||"")+"&"+location.search.replace("?","").replace(/^_\w+(&|$)/,"$1"));return s=[...new URLSearchParams(s).entries()].reduce(((t,e)=>({...t,[e[0]]:e[1]})),{}),a=Object.entries(s).map((t=>`${t[0]}=${t[1]}`)).join("&").replace(/=(&|$)/,"$1"),a?`${e}?${a}`:e}static disableButton(t){t.classList.add("disabled"),setTimeout((function(t){t.classList.remove("disabled")}),2e3,t)}static disableAjaxSubmit(t){t.classList.add("disabled"),$(".js-rest-create, .js-rest-update").off("click")}}},195:function(t){t.exports=class t{static id="core-loading";static wait(){$("body").append(`\n      <div class="d-flex-center ${t.id}">\n      <div class="spinner-border text-secondary" role="status">\n      <span class="visually-hidden">Loading...</span></div></div>\n    `)}static stop(){$(`.${t.id}`).remove()}}},464:function(t){t.exports=class t{static id="core-modal-alert";static alert(e){$(`#${t.id}`).remove();let a=$(t._getTemplate(Object.assign({header:e.title,body:e.message,footer:'<button type="button" class="btn btn-sm btn-primary" data-bs-dismiss="modal">OK</button>'},e)));new bootstrap.Modal(a[0]).show()}static confirm(e){$(`#${t.id}`).remove();let a=$(t._getTemplate(Object.assign({header:e.title,body:e.message,footer:'\n        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Cancel</button>\n        <button type="button" class="btn btn-sm btn-primary">OK</button>\n      '},e))),s=new bootstrap.Modal(a[0]);return new Promise(((t,e)=>{s.show(),a.find(".btn-primary").on("click",(()=>t(1))),a.on("hide.bs.modal",(()=>e(2)))}))}static _getTemplate(e=[]){return e.body&&(e.body=t._convertBody(e.body)),`\n      <div id="${t.id}" class="modal" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">\n      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">\n      <div class="modal-content type-${e.type}">\n        <div class="modal-header">${e.header??""}</div>\n        <div class="modal-body">${e.body??""}</div>\n        <div class="modal-footer">${e.footer??""}</div>\n      </div></div></div>\n    `}static _convertBody(t,e=""){if(Array.isArray(t)){e+="<ul>";for(let a of t)e=this._convertAlertBody(a,e);e+="</ul>"}else e+=e?"<li>"+String(t).replace(/\r?\n/g,"<br>")+"</li>":"<div>"+String(t).replace(/\r?\n/g,"<br>")+"</div>";return e}}},581:function(t){t.exports=class t{static setListSelect(t){t.on("click",(function(e){let a=this.dataset.target??"id";return t.closest("table").find(`input[name="${a}"]`).prop("checked",!0),e.preventDefault(),!1}))}static setListDeselect(t){t.on("click",(function(e){let a=this.dataset.target??"id";return t.closest("table").find(`input[name="${a}"]`).prop("checked",!1),e.preventDefault(),!1}))}static setListDelete(e){e.on("click",(function(a){let s=this.dataset.target??"id",o=e.closest("table").find(`input[name="${s}"]:checked`).map(((t,e)=>$(e).val())).get();if(0===o.length)return!1;$.ajax({data:{_method:"DELETE",id:o},dataType:"json",type:"POST",url:this.dataset.href??"."}).then(t.done).catch(t.fail),a.preventDefault()}))}static setAjaxSubmit(e){let a=e.closest("form");a.attr("action")||a.attr("action","?"),e.on("click",(function(e){a.ajaxSubmit({dataType:"json"}).data("jqxhr").then(t.done).catch(t.fail),Core.disableButton(this),e.preventDefault()}))}static setCreate(e){let a=e.closest("form");a.attr("action")||a.attr("action","."),e.on("click",(function(e){a.ajaxSubmit({dataType:"json"}).data("jqxhr").then(t.done).catch(t.fail),Core.disableButton(this),e.preventDefault()})),window.stop()}static setUpdate(e){let a=e.closest("form");a.attr("action")||a.attr("action","?"),a.append('<input type="hidden" name="_method" value="PUT">'),e.on("click",(function(e){a.ajaxSubmit({dataType:"json"}).data("jqxhr").then(t.done).catch(t.fail),Core.disableButton(this),e.preventDefault()})),window.stop()}static setDelete(e){e.on("click",(function(e){let a=this.getAttribute("href")??this.dataset.href??"?";Core.modal.confirm({message:this.dataset.confirm}).then((()=>{$.ajax({data:{_method:"DELETE"},dataType:"json",type:"POST",url:a}).then(t.done).catch(t.fail),Core.disableButton(this)})).catch((()=>{})),e.preventDefault()}))}static done(t,e,a){console.log("[done]",t,e,a),Core.loading.stop();let s={type:"success",location:a.getResponseHeader("location")};a.responseJSON?s=Object.assign(s,a.responseJSON):a.responseText&&(s.title=a.responseText),s.title&&Cookies.set("alert__primary",s.title,{expires:7,path:"/"}),s.location&&(location.href=s.location)}static fail(t,e,a){console.log("[fail]",t,e,a),Core.loading.stop();let s={type:"error",title:a};"parsererror"===e||(t.responseJSON?s=Object.assign(s,t.responseJSON):t.responseText&&(s.title=t.responseText)),Core.modal.alert(s)}}}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,{a:e}),e},a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a(4)}();