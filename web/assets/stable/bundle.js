!function(){"use strict";var t={4:function(t,e,n){n.g.Core=n(709),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)})),$('form[type="POST"]').on("keypress",(function(t){"Enter"===t.key&&t.preventDefault()})),$(".js-next-link").each((function(){this.hasAttribute("href")?this.setAttribute("href",Core.nextUrl(this.getAttribute("href"))):this.hasAttribute("data-href")&&(this.dataset.href=Core.nextUrl(this.dataset.href))})),$(".nav-link").each((function(t,e){let n=e.getAttribute("href"),r="/"===n?"/"===location.pathname:0===location.pathname.indexOf(n);e.classList.toggle("active",r)})),$(".row-link").each((function(){let t=this.dataset.href||$(this).find("a:first").attr("href");t&&$(this).css("cursor","pointer").on("click",(function(e){$(e.target).is("a")||$(e.target).closest("a,.row-link-disabled").length||window.getSelection().isCollapsed&&(window.location=t)}))})),$(".js-list-select").on("click",(function(t){let e=this.dataset.target??"id";return $(`input[name="${e}"]`).prop("checked",!0),t.preventDefault(),!1})),$(".js-list-deselect").on("click",(function(t){let e=this.dataset.target??"id";return $(`input[name="${e}"]`).prop("checked",!1),t.preventDefault(),!1})),$(".js-list-delete").on("click",(function(t){let e=this.dataset.target??"id",n=$(`input[name="${e}"]:checked`).map(((t,e)=>$(e).val())).get();if(0===n.length)return!1;$.ajax({data:{_method:"DELETE",id:n},dataType:"json",type:"POST",url:this.dataset.href??"."}).then(Core.doneRESTish).catch(Core.failRESTish),t.preventDefault()})),$(".js-rest-create").on("click",(function(t){let e=$(this).closest("form"),n=e.attr("action")??".";e.ajaxSubmit({dataType:"json",type:"POST",url:n}).data("jqxhr").then(Core.doneRESTish).catch(Core.failRESTish),t.preventDefault(),Core.disableButton(this)})),$(".js-rest-update").on("click",(function(t){let e=$(this).closest("form"),n=e.attr("action")??"?";e.ajaxSubmit({data:{_method:"PUT"},dataType:"json",type:"POST",url:n}).data("jqxhr").then(Core.doneRESTish).catch(Core.failRESTish),t.preventDefault(),Core.disableButton(this)})),$(".js-rest-delete").on("click",(function(t){if(!Core.confirm(this.dataset.confirm))return!1;let e=this.getAttribute("href")??this.dataset.href??"?";$.ajax({data:{_method:"DELETE"},dataType:"json",type:"POST",url:e}).then(Core.doneRESTish).catch(Core.failRESTish),t.preventDefault(),Core.disableButton(this)}))},709:function(t){t.exports=class t{static nextUrl(t=""){let[e,n]=t.split("?");""===e&&(e=location.pathname);let r=new URLSearchParams(location.search.replace(/(\?|&)do=.*?(&|$)/,"$1")+"&"+(n||""));return r=[...new URLSearchParams(r).entries()].reduce(((t,e)=>({...t,[e[0]]:e[1]})),{}),n=Object.entries(r).map((t=>`${t[0]}=${t[1]}`)).join("&").replace(/\?$/,""),n?`${e}?${n}`:e}static disableButton(t){t.classList.add("disabled"),setTimeout((function(t){t.classList.remove("disabled")}),3e3,t)}static waitLoad(){$("body").append('<div class="d-flex align-items-center justify-content-center core-loading"><div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading...</span></div></div>')}static endLoad(){$(".core-loading").remove()}static confirm(t){return!t||confirm(t)}static doneRESTish(e,n,r){console.log("[done]",e,n,r),($_=r.getResponseHeader("location"))&&(location.href=201===r.status?$_:t.nextUrl($_)),t.endLoad()}static failRESTish(e,n,r){if(console.log("[fail]",e,n,r),!e.responseJSON)return alert(e.responseText||r);let a=e.responseJSON;a.items&&(a.error+="\n--\n");for(let t of a.items)a.error+=t+"\n";alert(a.error),t.endLoad()}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(4)}();